<%- include('../partials/header.ejs') %> <%-
include('../partials/page_header_li.ejs') %>

<main class="main">
  <!-- slider -->
  <section class="slider">
    <div
      id="carouselExampleIndicators"
      class="carousel slide"
      data-ride="carousel"
      style="width: 100%; margin-bottom: 50px"
    >
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="/user_assets/imgs/slider/Banner_4.webp"
            class="d-block w-100"
            alt="Slide 1"
            style="position: relative"
          />
          <button
            class="btn btn-dark"
            style="
              position: absolute;
              bottom: 20px;
              left: 50%;
              transform: translateX(-50%);
              color: black;
              background-color: white;
            "
          >
            Buy Now
          </button>
        </div>
        <div class="carousel-item">
          <img
            src="/user_assets/imgs/slider/Banner_2.webp"
            class="d-block w-100"
            alt="Slide 2"
          />
        </div>
        <div class="carousel-item">
          <img
            src="/user_assets/imgs/slider/Banner_3.webp"
            class="d-block w-100"
            alt="Slide 3"
          />
        </div>
      </div>
      <a
        class="carousel-control-prev"
        href="#carouselExampleIndicators"
        role="button"
        data-slide="prev"
        style="left: 5%"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </a>
      <a
        class="carousel-control-next"
        href="#carouselExampleIndicators"
        role="button"
        data-slide="next"
        style="right: 5%"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </a>
    </div>
  </section>
  <!-- end of slider -->

  <!-- filter section -->
  <section class="product-tabs pt-25 pb-20 wow fadeIn animated">
    <div class="container">
      <div class="row">
        <!-- Category, Sort by, Price Range -->
        <div class="col-lg-3">
          <div class="widget-category mb-30">
            <h5 class="section-title style-1 mb-30 wow fadeIn animated">
              Category
            </h5>
            <ul class="categories">
              <% categories.forEach((category)=>{ %>
              <li><a href="/load_product"><%= category.name %></a></li>
              <% }) %>
            </ul>
          </div>
          <div class="widget-category mb-30">
            <h5 class="section-title style-1 mb-30 wow fadeIn animated">
              Sort by
            </h5>
            <ul class="categories">
              <li><a href="/load_product">Popularity</a></li>
              <li><a href="/load_product">Average rating</a></li>
              <li><a href="/load_product">Price: Low to High</a></li>
              <li><a href="/load_product">Price: High to Low</a></li>
            </ul>
          </div>
          <div class="widget-category mb-30">
            <h5 class="section-title style-1 mb-30 wow fadeIn animated">
              Price Range
            </h5>
            <ul class="categories">
              <li><a href="/load_product">$0-$200</a></li>
              <li><a href="/load_product">$200-$400</a></li>
              <li><a href="/load_product">$400-$600</a></li>
              <li><a href="/load_product">$600-$800</a></li>
              <li><a href="/load_product">800$+</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-9">
          <!--products-->
          <div class="tab-content wow fadeIn animated" id="myTabContent">
            <div
              class="tab-pane fade show active"
              id="tab-one"
              role="tabpanel"
              aria-labelledby="tab-one"
            >
            <!-- Product template -->
            <div class="row product-grid-4" >
              <div class="row product-grid-4">
                <% products.forEach((product, index) => { %>
                <div class="col-lg-4 col-md-4 col-12 col-sm-6">
                  <div class="product-cart-wrap mb-30">
                    <div class="product-img-action-wrap">
                      <div class="product-img product-img-zoom">
                        <a href="/load_product?id=<%= product.id %>">
                          <img
                            class="default-img"
                            style="height: 100%;" 
                            src="/uploads/<%= product.media[0] %>"
                            alt="<%= product.media[0] %>"
                          />
                          <img
                            class="hover-img"
                            style="height: 100%;" 
                            src="/uploads/<%= product.media[0] %>"
                            alt="<%= product.media[0] %>"
                          />
                        </a>
                      </div>
                      <div class="product-action-1">
                        <a
                          aria-label="Add To Wishlist"
                          class="action-btn hover-up"
                          href="#"
                          ><i class="fi-rs-heart"></i
                        ></a>
                      </div>
                    </div>
                    <div class="product-content-wrap">
                      <div class="product-category">
                        <a href="#"><%= product.category %></a>
                      </div>
                      <h2>
                        <a href="/load_product?id=<%= product.id %>"
                          ><%= product.name %></a
                        >
                      </h2>
                      <div class="rating-result" title="90%">
                        <span>
                          <span>90%</span>
                        </span>
                      </div>
                      <div class="product-price">
                        <span>$ <%= product.price %> </span>
                        <!-- <span class="old-price">$245.8</span> -->
                      </div>
                      <div class="product-action-1 show">
                        <a
                          aria-label="Add To Cart"
                          class="action-btn hover-up"
                          href="#"
                          ><i class="fi-rs-shopping-bag-add"></i
                        ></a>
                      </div>
                    </div>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
          </div> 
        </div> 
      </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end of filter section -->

  <!-- gurantees  -->
  <section class="featured section-padding">
    <div class="container pb-25">
      <div class="row">
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-1.png" alt="" />
            <h4 class="bg-1">Free Shipping</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-2.png" alt="" />
            <h4 class="bg-3">Online Order</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-3.png" alt="" />
            <h4 class="bg-2">Save Money</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-4.png" alt="" />
            <h4 class="bg-4">Promotions</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-5.png" alt="" />
            <h4 class="bg-5">Happy Sell</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/user_assets/imgs/theme/icons/feature-6.png" alt="" />
            <h4 class="bg-6">24/7 Support</h4>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end of gurantees -->
</main>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
  // Preload images to ensure smooth transition
  $(document).ready(function () {
    $("#carouselExampleIndicators .carousel-item img").each(function () {
      var src = $(this).attr("src");
      $("<img/>")
        .attr("src", src)
        .on("load", function () {
          $(this).remove();
        });
    });
  });
</script>

<%- include('../partials/page_footer.ejs') %> <%-
include('../partials/footer.ejs')%>
